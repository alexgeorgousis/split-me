<div id="<%= dom_id split %>" class="w-full border rounded-lg transition-all text-xl md:text-base overflow-hidden border-gray-700">
  <div class="absolute top-4 right-4 z-20 flex space-x-2">
    <%= button_to split,
      method: :delete,
      class: "cursor-pointer bg-transparent rounded-full border-0 border-2 border-red-600 p-1",
      data: { turbo_confirm: "Are you sure?" } do %>
      <%= icon "bin", css_class: "w-6 h-6 text-red-700 hover:text-red-600" %>
    <% end %>
  </div>

  <div class="flex">
    <% if split.receipt %>
      <% if split.receipt.attached? %>
        <%= link_to split.receipt.file, target: "_blank", class: "relative z-20 w-[120px] h-[140px] flex items-center justify-center" do %>
          <% if split.receipt.blob.content_type.starts_with?('image/') %>
            <%= image_tag split.receipt.file.variant(resize_to_limit: [120, 140]), class: "w-full h-full", loading: "lazy" %>
          <% elsif split.receipt.file.previewable? %>
            <%= image_tag split.receipt.file.preview(resize_to_limit: [120, 140]), class: "w-full h-full", loading: "lazy" %>
          <% else %>
            <span class="text-gray-400 text-9xl">ðŸ“„</span>
          <% end %>
        <% end %>
      <% end %>
      <%= turbo_stream_from split %>
      <%= render "splits/card_content", split: split %>
    <% else %>
      <div class="px-8 md:px-6 pt-4 pb-8 md:pb-6">
        <span class="text-gray-400">No receipt uploaded</span>
      </div>
    <% end %>
  </div>
</div>
